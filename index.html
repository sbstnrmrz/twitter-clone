<!DOCTYPE html>
<html>
<head>
<title>Twitter clone</title>
<style>
  html, body {
    height: 100%; 
    margin: 0; /* Remove default body margins */
  }
  body {
    display: flex; /* Enable flexbox on the body */
    justify-content: center; /* Horizontally center the content */
    align-items: center;    /* Vertically center the content */
  }

  .form-container {
    width: 300px;
    height: auto;
    background-color: #f0f0f0;
    border: 1px solid #ccc;
    text-align: center;
    padding: 20px;
  }
  .form-container button {
    width: 100%;
    padding: 10px;
    margin-bottom: 15px; /* Add margin below each input */
    box-sizing: border-box;
    text-align: center;

  }

  input[type="text"], input[type="password"] {
    width: 100%;
    padding: 10px;
    margin-bottom: 15px; /* Add margin below each input */
    box-sizing: border-box;
  }

  .hidden {
    display: none; 
  }

</style>
</head>
<body>
  <div class="form-container">
    <form action="/login" id="login-form" method="post">
      <input type="text" id="login-username" name="username" placeholder="Username" required> 
      <input type="password" id="login-password" name="password" placeholder="Password" required> 
      <button type="submit">Sign in</button>
      <a id="create-account" href="#"><span>Create an account</span></a>
    </form>

    <form action="/create-account" method="post" id="create-account-form" class="hidden">
      <input type="text" id="create-name" name="name" placeholder="Name" required> 
      <input type="text" id="create-username" name="username" placeholder="Choose your username" required> 
      <input type="password" id="create-password" name="password" placeholder="Create a password" required> 
      <button type="submit">Create account</button>
      <a id="login" href="#"><span>Already have an account? Sign in</span></a>
      <span id="create-account-error" style="color: red;"></span>
    </form>
  </div>
  <script>
    const loginForm = document.getElementById('login-form');
    const createAccountForm = document.getElementById('create-account-form');
    const showCreateAccountLink = document.getElementById('create-account');
    const showLoginLink = document.getElementById('login');
    const createAccountError = document.getElementById('create-account-error');

    showCreateAccountLink.addEventListener('click', (e) => {
      e.preventDefault();
      loginForm.classList.add('hidden');
      createAccountForm.classList.remove('hidden');
      createAccountError.textContent = ''; // Clear error on switch
    });

    showLoginLink.addEventListener('click', (e) => {
      e.preventDefault();
      createAccountForm.classList.add('hidden');
      loginForm.classList.remove('hidden');
      createAccountError.textContent = ''; // Clear error on switch
    });

    createAccountForm.addEventListener('submit', async (e) => {
      e.preventDefault(); // Prevent default form submission

      const name = document.getElementById('create-name').value;
      const username = document.getElementById('create-username').value;
      const password = document.getElementById('create-password').value;

      const formData = new FormData(createAccountForm); // Collect form data

      try {
        const response = await fetch('/create-account', {
          method: 'POST',
          body: formData,
        });

        const data = await response.json();

        if (data.error) {
          createAccountError.textContent = data.error;
        } else {
          alert("Account created successfully!");
          createAccountForm.reset();
          createAccountError.textContent = "";
          loginForm.classList.remove('hidden');
          createAccountForm.classList.add('hidden');
        }
      } catch (error) {
        console.error("Error:", error);
        createAccountError.textContent = "An error occurred. Please try again.";
      }
    });

  </script>
</body>
</html>
